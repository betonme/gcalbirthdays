<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs
    title="gCalBirthdays"
    title_url="http://gcalbirthdays.googlecode.com"
    author="Frank Glaser"
    author_email="GlaserFrank@gmail.com"
    scrolling="true">
    <Require feature="google.calendar-0.5"/>
    <Require feature="dynamic-height"/>
    <Require feature="setprefs"/>
    <OAuth>
      <Service name="google">
        <Access url="https://www.google.com/accounts/OAuthGetAccessToken" method="GET" />
      <Request url="https://www.google.com/accounts/OAuthGetRequestToken?scope=http://www.google.com/m8/feeds/%20http://www.google.com/calendar/feeds/" method="GET" />
        <Authorization url="https://www.google.com/accounts/OAuthAuthorizeToken?oauth_callback=http://oauth.gmodules.com/gadgets/oauthcallback" />
      </Service>
    </OAuth>
    <UserPref name="test" display_name="Color" default_value="Yellow" datatype="hidden"/>
  </ModulePrefs>
  <Content type="html">
    <![CDATA[

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="http://cdn.jquerytools.org/1.0.2/jquery.tools.min.js"></script>

<style>

/* the overlayed element */
div.overlay {

  /* growing background image */
  /* background-image:url(../img/overlay/white.png); */
  background-image:url(overlay_transparent.png);
    color:#efefef;

  /* dimensions after the growing animation finishes  */
  width:600px;
  height:470px;

  /* initially overlay is hidden */
  display:none;

  /* some padding to layout nested elements nicely  */
  padding:55px;
}

/* default close button positioned on upper right corner */
div.overlay div.close {
  background-image:url(../img/overlay/close.png);
  position:absolute;
  right:5px;
  top:5px;
  cursor:pointer;
  height:35px;
  width:35px;
}


/* black */
div.overlay.black {
  background:url(../img/overlay/transparent.png) no-repeat !important;
  color:#fff;
}

/* petrol */
div.overlay.petrol {
  background:url(../img/overlay/petrol.png) no-repeat !important;
  color:#fff;
}

div.black h2, div.petrol h2 {
  color:#ddd;
}
</style>


<a href="http://www.google.de" rel="#overlay">
  <button type="button">Show external page in overlay</button>
</a>
<br>
<div class="overlay" id="overlay">
  <div class="wrap"></div>
</div>



<!-- make all links with the 'rel' attribute open overlays -->
<script>

  gadgets.util.registerOnLoadHandler(setupGadget);

    function setupGadget(){

      $(function() {
        // if the function argument is given to overlay, it is assumed to be the onBeforeLoad event listener
        $("a[rel]").overlay(function() {

          // grab wrapper element inside content
          var wrap = this.getContent().find("div.wrap");

          // load only for the first time it is opened
          if (wrap.is(":empty")) {
            wrap.load(this.getTrigger().attr("href"));
          }
        });
      });


    };


</script>


  ]]>
  </Content>
</Module>
