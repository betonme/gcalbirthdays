<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>gCalBirthdays Debug</title>	  
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
		
		<style type="text/css">
			body {
				margin: 0px;
			}
		</style>		
		
		<!--http://log4javascript.org-->
		<!--V1.4.1-->
		<script type="text/javascript" src="http://log4javascript.org/js/log4javascript_uncompressed.js"></script>
		
		<script type="text/javascript">
			// <![CDATA[
			var log = log4javascript.getLogger('main');
			var appender = new log4javascript.InPageAppender('log', false, false);
			var logAppenderHeight = 250;
			var logAppenderBorder = 2;
			appender.setWidth(appender.getWidth()-logAppenderBorder);
			appender.setHeight(logAppenderHeight-logAppenderBorder);
			appender.setMaxMessages(null);
			appender.setInitiallyMinimized(false);
			appender.setShowCommandLine(false);
			log.addAppender(appender);
			log.debug('gCalBirthdays Debug');
			// ]]>
		</script>
		
		<script>
			/* Log4Javascript is using the onLoad event - Append our onLoad function */
			var logLoad = window.onload;
				window.onload = function() {
				logLoad();
				loadPage();
			}
			
			/* Load Page */
			function loadPage() {
				createIFrame();
				hideLog4JavascriptElements();
			}
			
			/* Create iFrame */
			function createIFrame() {
				var iframe = document.createElement('iframe');
				iframe.id = 'gCalBirthdaysDebugIFrame';
				iframe.src = 'gCalBirthdays.html';
				iframe.width = '100%';
				iframe.height = window.innerHeight - logAppenderHeight;
				iframe.marginheight = '0px';
				iframe.marginwidth = '0px';
				iframe.frameBorder = 'no';
				iframe.scrolling = 'auto';
				iframe.onload = function () {
					injectCSS(this.contentDocument);
					injectScript(this.contentDocument);
					injectHTML(this.contentDocument);
				};
				document.body.replaceChild(iframe, document.getElementById("iframe"));
			}
			
			/* Hide Log4Javascript Elements */		
			function hideLog4JavascriptElements() {
				try {
					var l4js = document.getElementById('log');
					/* Hide Log4Javascript Toolbar */
					var el = document.createElement('style');
					el.type = 'text/css';
					el.innerHTML = '#switchesContainer { visibility:hidden; height: 0px } ';
					l4js.firstChild.firstChild.contentDocument.body.appendChild(el);
				}
				catch(err) {
					setTimeout('hideLog4JavascriptElements()', 100);
				}
			}
			
			/* Inject CSS */
			function injectCSS(o) {
				var el = document.createElement('style');
				el.type = 'text/css';
				el.innerHTML='body { margin: 0px; };';
				o.body.appendChild(el);
			}
			
			/* Inject script */
			function injectScript(o) {
				var el = document.createElement('script');
				el.innerHTML = 'console = parent.log; \
												function printLog(text) { parent.log.debug(text); };';
				o.body.appendChild(el);
			}
			
			/* Inject HTML */
			function injectHTML(o) {
				var el = document.createElement('H1');
				var at = document.createAttribute('style');
				at.nodeValue ='margin-left: 10px; margin-top: 10px;';
				el.setAttributeNode(at);
				el.innerHTML=' gCalBirthdays DEBUG';
				o.body.insertBefore(el, o.body.firstChild); 
				var el2 = el.cloneNode(true);
				o.body.appendChild(el2);
			}
			
			/* Resize iFrame */
			function resizeIFrame() {
 				try {
					var ifr = document.getElementById('gCalBirthdaysDebugIFrame');
					/* There are problems detecting the correct firebug hight use default height */
					//if (firebug) { ifr.height = window.innerHeight - firebug.env.height; }
					ifr.height = window.innerHeight - logAppenderHeight;
				}
				catch(err) {
					setTimeout('hideLog4JavascriptElements()', 100);
				}
			}
			
			function onClickBtn() {
				log.debug("test");
			}
		</script>
		
		<!--Google Analytics-->
		<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		</script>
		<script type="text/javascript">
			try {
				var pageTracker = _gat._getTracker("UA-9798979-1");
				pageTracker._trackPageview();
			}
			catch(err) {}
		</script>
	</head>
	
	<body onResize="resizeIFrame();">
		<iframe id="iframe"></iframe>
		<div id="log"></div>
	</body>
	
</html>
